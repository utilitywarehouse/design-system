import { Meta, Primary, Controls, Story, Canvas } from '@storybook/blocks';
import * as Stories from './Input.stories';
import {
  Input,
  InputField,
  InputIcon,
  InputSlot,
  Center,
  NativeUIProvider,
} from '@utilitywarehouse/native-ui';
import { EmailMediumIcon } from '@utilitywarehouse/react-native-icons';
import { ViewFigmaButton, BackToTopButton } from '../../docs/components';

<Meta of={Stories} />

<BackToTopButton />

<ViewFigmaButton url="https://www.figma.com/design/3RY3OvLA88yZksRjOfjQJm/UW-App-UI?node-id=6988-2603&m=dev" />

# Input

The input component is a text field that allows users to enter text, numbers, or other data. It is commonly used in forms and search fields.

- [Playground](#playground)
- [Usage](#usage)
- [Props](#props)
  - [`Input`](#input)
  - [`InputField`](#inputfield)
  - [`InputIcon`](#inputicon)
  - [`InputSlot`](#inputslot)
- [Variants](#variants)
- [Accessibility](#accessibility)

## Playground

<Primary />

<Controls />

## Usage

> This component should be wrapped in a `NativeUIProvider` component to ensure that the correct theme is applied.

<Canvas>
  <NativeUIProvider>
    <Center>
      <Input onChange={() => console.log('###')}>
        <InputSlot>
          <InputIcon as={EmailMediumIcon} />
        </InputSlot>
        <InputField placeholder="Placeholder" />
      </Input>
    </Center>
  </NativeUIProvider>
</Canvas>

```tsx
import { Input, InputField, InputIcon, InputSlot } from '@utilitywarehouse/native-ui';
import { EmailMediumIcon } from '@utilitywarehouse/react-native-icons';

const MyComponent = () => {
  const [value, setValue] = useState('');
  const handleChange = e => {
    setValue(e.target.value);
  };
  return (
    <Input onChange={handleChange} value={value}>
      <InputSlot>
        <InputIcon as={EmailMediumIcon} />
      </InputSlot>
      <InputField placeholder="Placeholder" />
    </Input>
  );
};
```

## Props

### `Input`

| Prop               | Type                               | Default     | Description                          |
| ------------------ | ---------------------------------- | ----------- | ------------------------------------ |
| validationStatus   | `'initial' \| 'valid' \| 'invalid` | `'initial'` | The validation status of the input.  |
| showValidationIcon | boolean                            | false       | Whether to show the validation icon. |
| disabled           | boolean                            | false       | Disables the input.                  |
| readonly           | boolean                            | false       | Makes the input read-only.           |
| isFocused          | boolean                            | false       | Sets focus on the input.             |

#### Descendants Styling Props

Props to style child components.

| Sx Prop          | Description                       |
| ---------------- | --------------------------------- |
| \_input          | Prop to style Input               |
| \_icon           | Prop to style InputIcon           |
| \_validationIcon | Prop to style InputValidationIcon |

### `InputField`

| Prop        | Type                   | Default  | Description                                                       |
| ----------- | ---------------------- | -------- | ----------------------------------------------------------------- |
| value       | string                 |          | The value of the input.                                           |
| onChange    | function               |          | Callback function that is triggered when the input value changes. |
| onBlur      | function               |          | Callback function that is triggered when the input loses focus.   |
| onFocus     | function               |          | Callback function that is triggered when the input gains focus.   |
| placeholder | string                 |          | The placeholder text for the input.                               |
| type        | `'text' \| 'password'` | `'text'` | The type of the input.                                            |

### `InputIcon`

| Prop | Type   | Default | Description         |
| ---- | ------ | ------- | ------------------- |
| as   | string |         | The icon component. |

### `InputSlot`

| Prop | Type | Default | Description |
| ---- | ---- | ------- | ----------- |
| -    | -    | -       | -           |

## Variants

The `Input` component has the following variants:

<Canvas of={Stories.Variants} />

## Accessibility

We have outlined the various features that ensure the Input component is accessible to all users, including those with disabilities. These features help ensure that your application is inclusive and meets accessibility standards.Adheres to the [WAI-ARIA design pattern](https://www.w3.org/TR/wai-aria-1.2/#textbox).

### Keyboard

- Setting the aria-label and aria-hint to help users understand the purpose and function of the Input

### Screen Reader

- Compatible with screen readers such as VoiceOver and Talk-back.
- The accessible and aria-label props to provide descriptive information about the Input
- Setting aria-traits and aria-hint to provide contextual information about the various states of the Input, such as "double tap to edit".

### Focus Management

- The onFocus and onBlur props to manage focus states and provide visual cues to users. This is especially important for users who rely on keyboard navigation.

### States

- In error state, aria-invalid will be passed to indicate that the Input has an error, and providing support for an aria-errormessage to describe the error in more detail.
- In disabled state, aria-hidden will be passed to make input not focusable.
- In required state, aria-required will be passed to indicate that the Input is required.

For more information, see the [Gluestack Input component documentation](https://gluestack.io/ui/docs/components/forms/input).
