import { Meta, Canvas, ArgTypes, Description } from '@storybook/blocks';
import * as Stories from './TextLink.stories';

<Meta of={Stories} />

# Link

<Description />

<Canvas of={Stories.Workshop} />

## Contents

- [Usage](#usage)
- [Semantic HTML](#semantic-html)
- [Size](#size)
- [Color](#color)
- [Usage with Next.js](#usage-with-next.js)
  - [Next.js v13](#next.js-v13)
  - [Next.js before v13](#next.js-before-v13)
- [API Reference](#api-reference)

## Usage

This `TextLink` component is part of the lab submodule, a way for us to make new
components available prior to an official major release. This helps us bed in
new components before introducing breaking changes, and to avoid blocking the
availability of these components for designers.

There are 2 options for importing this component.

1. Import directly from the `lab` directory.

```tsx
import { Text } from '@utilitywarehouse/web-ui';
import { TextLink } from '@utilitywarehouse/web-ui/dist/lab';

[...]

<Text>
  <TextLink>TextLink</TextLink>
</Text>
```

2. Import `Lab` directly from Web UI.

```tsx
import { Text, Lab } from '@utilitywarehouse/web-ui';

[...]

<Text>
  <Lab.TextLink>TextLink</Lab.TextLink>
</Text>
// or
const { TextLink } = Lab
<Text>
  <TextLink>TextLink</TextLink>
</Text>
```

## Semantic HTML

A semantic HTML `a` is rendered by default, this cannot be changed due to the
expectations on links within blocks of text.

## Size

The `TextLink` component must be wrapped in a `Text` component, and will
inherit it's styles, so it's size will be controlled by the containing
`Text` variant.

## Color

When nested inside a `Box` component that specifies a either a brand purple or
brand midnight background, the `TextLink` colour will change in the same way
the `Text` component does.

```tsx
<Box padding={2} background={colorsCommon.brandPrimaryPurple}>
  <Text variant="body">
    Text with a <TextLink>TextLink</TextLink> on brandPrimaryPurple background
  </Text>
</Box>
<Box padding={2} background={colorsCommon.brandMidnight}>
  <Text variant="body">
    Text with a <TextLink>TextLink</TextLink> on brandMidnight background
  </Text>
</Box>
```

You can use the `color` prop to override the `TextLink` colours. This will set
the `active` & `visited` states to the same colour as the default state. If you
set it to `"inherit"` then the `TextLink` component will inherit the colour of
the parent element.

```tsx
import { Box, Text } from "@utilitywarehouse/web-ui";
import { TextLink } from "@utilitywarehouse/web-ui/dist/lab";

[...]

<Box padding={2} background={colorsCommon.brandMidnight}>
  <Text variant="body" color={colorsCommon.brandPink}>
    Text with a{' '}
    <TextLink {...args} color="inherit">
      TextLink
    </TextLink>{' '}
    on brandMidnight background with custom color
  </Text>
</Box>
<Box padding={2}>
  <Text variant="body">
    Text with a{' '}
    <TextLink {...args} color={colors.green500}>
      TextLink
    </TextLink>{' '}
    on brandWhite background with custom color
  </Text>
</Box>
```

<Canvas of={Stories.TextLinkColour} />

## Usage with Next.js

### Next.js v13

The Next.js `Link` component behaviour has changed in v13, so that an `<a>` is
no longer required as a child. You can render the Web UI `TextLink` component as a
Next.js `Link` component using `asChild`:

```tsx
import NextLink from 'next/link';
import { TextLink } from '@utilitywarehouse/web-ui/dist/lab';

[...]

{/* // eslint-disable-next-line jsx-a11y/anchor-is-valid */}
<TextLink asChild>
  <NextLink href={href} onClick={onClick}>
    {title}
  </NextLink>
</TextLink>
```

You can also use the `legacyBehavior` prop directly on the Next.js Link component:

```tsx
import NextLink from 'next/link';
import { TextLink } from '@utilitywarehouse/web-ui/dist/lab';

[...]

<NextLink href={href} passHref onClick={onClick} legacyBehavior>
  {/* // eslint-disable-next-line jsx-a11y/anchor-is-valid */}
  <TextLink>{title}</TextLink>
</NextLink>
```

And if you want to set this behavior globally you can use the following Next.js
configuration:

```
{
  experimental: {
    newNextLinkBehavior: false
  }
}
```

### Next.js before v13

```tsx
import NextLink from 'next/link';
import { TextLink } from '@utilitywarehouse/web-ui/dist/lab';

[...]

<NextLink href={href} passHref onClick={onClick}>
  {/* // eslint-disable-next-line jsx-a11y/anchor-is-valid */}
  <TextLink>{title}</TextLink>
</NextLink>
```

## API Reference

<ArgTypes of={Stories} />
```
