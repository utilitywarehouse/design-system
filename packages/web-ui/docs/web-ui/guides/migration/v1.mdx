import { Meta } from '@storybook/blocks';
import { Analytics } from '@vercel/analytics/react';

<Analytics />

<Meta title="Web UI / Guides / Migration / v1" />

# v1

This guide should help with migrating from **Web UI** `v0` to `v1`. It should
cover all significant changes, however there may be some minor inconsistencies
not documented here. Please open an issue or PR if you find something worth
documenting for others, thankyou!

## Contents

- [Typography component](#typography-component)
- [Buttons size renaming](#buttons-size-renaming)
- [Codemods](#codemods)
  - [Migration](#migration)
  - [Rename lab button size](#rename-lab-button-size)

## Typography component

The `Typography` component is being removed for this release, and replaced with
the `Text` & `Heading` components.

```diff
- <Typography>{content}</Typography>
- <Typography variant="subtitle">{content}</Typography>
- <Typography variant="body">{content}</Typography>
- <Typography variant="legalNote">{content}</Typography>
- <Typography variant="caption">{content}</Typography>
- <Typography variant="displayHeading">{content}</Typography>
- <Typography variant="h1">{content}</Typography>
- <Typography variant="h2">{content}</Typography>
- <Typography variant="h3">{content}</Typography>
- <Typography variant="h4">{content}</Typography>
- <Typography gutterBottom>{content}</Typography>
- <Typography paragraph>{content}</Typography>
+ <Text>{content}</Text>
+ <Text variant="subtitle">{content}</Text>
+ <Text variant="body">{content}</Text>
+ <Text variant="legalNote">{content}</Text>
+ <Text variant="caption">{content}</Text>
+ <Heading variant="displayHeading">{content}</Heading>
+ <Heading variant="h1">{content}</Heading>
+ <Heading variant="h2">{content}</Heading>
+ <Heading variant="h3">{content}</Heading>
+ <Heading variant="h4">{content}</Heading>
+ <Text sx={{ marginBottom: '0.35em' }}>{content}</Text>
+ <Text component='p' sx={{ marginBottom: '16px' }}>{content}</Text>
```

The `Text` & `Heading` components support nearly all the same variants as the
legacy `Typography` component, the only exception to this is the `inherit`
variant. To replace this you can use either a `Box` or `Text` component with
`sx` styling:

```tsx
<Box component="span" sx={{ font: 'inherit' }}>
```

We will provide a codemod to migrate to these components, however they are not
a 1-2-1 match, as they do not continue with props such as `fontWeight`, `paragraph` or
`gutterBottom`, so you should visually verify all changes.

In place of the `paragraph` and `gutterBottom` props, we recommend you
structure your layouts using the layout components, such as `Box`, `Flex`,
`Stack`, `Grid`, and to a lesser extent `Spacer`. However the codemod will
transform these props, as follows:

- 'gutterBottom' -> `sx={{ marginBottom: '0.35em' }}`
- 'paragraph' -> `component="p"` and `sx={{ marginBottom: '16px' }}`

In place of the `fontWeight` prop, on `Text` components you can use the `bold`
boolean prop, or, when appropriate, use the `Strong` component.

## Buttons size renaming

The `Button` component from the `lab` submodule, and the `IconButton`
component, have had the `large` size value renamed to `medium`.

There is a codemod available to support this change.

```diff
- <Button size='large'></Button>
+ <Button size='medium'></Button>
- <Button
-   size={{
-     mobile: 'small',
-     desktop: 'large',
-   }}
- ></Button>
+ <Button
+   size={{
+     mobile: 'small',
+     desktop: 'medium',
+   }}
+ ></Button>
- <IconButton size='large'></IconButton>
+ <IconButton size='medium'></IconButton>
- <IconButton
-   size={{
-     mobile: 'small',
-     desktop: 'large',
-   }}
- ></IconButton>
+ <IconButton
+   size={{
+     mobile: 'small',
+     desktop: 'medium',
+   }}
+ ></IconButton>
```

## Codemods

### Migration

This will run all codemods required to migrate from Web UI `v0` to `v1`.
You can use `npx` to run the codemod on your source files.

```console
npx @utilitywarehouse/ds-codemod web-ui/v1/migration <path>
```

Included codemods:

- `rename-lab-button-size`
- `rename-icon-button-size`

Please make sure you fix any linting or formatting issues before continuing to
run any further codemods.

### Rename lab Button size

Updates the size value `large` to `medium` for the `Button` component from the lab submodule.

```console
npx @utilitywarehouse/ds-codemod web-ui/v1/rename-lab-button-size <path>
```

### Rename IconButton size

Updates the size value `large` to `medium` for the `IconButton` component.

```console
npx @utilitywarehouse/ds-codemod web-ui/v1/rename-icon-button-size <path>
```
